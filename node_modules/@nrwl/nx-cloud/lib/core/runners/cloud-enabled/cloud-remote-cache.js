const a2_0x26b7=['VERBOSE_LOGGING','store','retrieve','cache-miss','hashUrls','Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.','../../../utilities/nx-imports','../../../utilities/environment','requests','reduce','all','axiosException','Error\x20when\x20storing\x20artifacts','get','CloudRemoteCache','__esModule','waitForStoreRequestsToComplete','statuses','note','response','next','api','storeInCurrentProcess','There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.','.\x20Status\x20404.','remote-cache-hit','map','defineProperty','startRun','filter','value','runContext','extractErrorMessage','fileStorage','__awaiter','distributedExecutionId','done','apply','Nx\x20Cloud:\x20Skipping\x20storing\x20','resolve','push','indexOf','put','messages','cacheError','status','Nx\x20Cloud:\x20Cache\x20miss\x20','forEach','delayedStoreRequests','scheduledTasks','throw','storage','then','storeRequests'];(function(_0x153d9a,_0x26b75b){const _0x3b79f7=function(_0x18ceb7){while(--_0x18ceb7){_0x153d9a['push'](_0x153d9a['shift']());}};_0x3b79f7(++_0x26b75b);}(a2_0x26b7,0xbd));const a2_0x3b79=function(_0x153d9a,_0x26b75b){_0x153d9a=_0x153d9a-0x0;let _0x3b79f7=a2_0x26b7[_0x153d9a];return _0x3b79f7;};'use strict';var __awaiter=this&&this[a2_0x3b79('0x7')]||function(_0x49abaf,_0x1bd2ba,_0x1bfea7,_0x5d5d09){function _0x54ace8(_0x695078){return _0x695078 instanceof _0x1bfea7?_0x695078:new _0x1bfea7(function(_0x13fd38){_0x13fd38(_0x695078);});}return new(_0x1bfea7||(_0x1bfea7=Promise))(function(_0x2500d4,_0x5f3e31){function _0x1ca208(_0x321bea){try{_0x26ab9a(_0x5d5d09[a2_0x3b79('0x2f')](_0x321bea));}catch(_0x433534){_0x5f3e31(_0x433534);}}function _0x54e01b(_0x30c8ab){try{_0x26ab9a(_0x5d5d09[a2_0x3b79('0x17')](_0x30c8ab));}catch(_0x44d135){_0x5f3e31(_0x44d135);}}function _0x26ab9a(_0x3595c3){_0x3595c3[a2_0x3b79('0x9')]?_0x2500d4(_0x3595c3[a2_0x3b79('0x3')]):_0x54ace8(_0x3595c3['value'])[a2_0x3b79('0x19')](_0x1ca208,_0x54e01b);}_0x26ab9a((_0x5d5d09=_0x5d5d09[a2_0x3b79('0xa')](_0x49abaf,_0x1bd2ba||[]))['next']());});};Object[a2_0x3b79('0x0')](exports,a2_0x3b79('0x2a'),{'value':!![]});exports[a2_0x3b79('0x29')]=void 0x0;const environment_1=require(a2_0x3b79('0x22'));const {output}=require(a2_0x3b79('0x21'));class CloudRemoteCache{constructor(_0x26034f,_0x36f313,_0x5cfcca,_0x4fb96d,_0x163d8d,_0x1fb2a4){this[a2_0x3b79('0x10')]=_0x26034f;this['api']=_0x36f313;this[a2_0x3b79('0x4')]=_0x5cfcca;this[a2_0x3b79('0x6')]=_0x4fb96d;this[a2_0x3b79('0x8')]=_0x163d8d;this[a2_0x3b79('0x31')]=_0x1fb2a4;this[a2_0x3b79('0x1a')]=[];this[a2_0x3b79('0x15')]=[];}[a2_0x3b79('0x1d')](_0x113cde,_0x393015){var _0x505728;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x3b79('0x10')][a2_0x3b79('0x11')])return![];const _0x58ce75=yield this[a2_0x3b79('0x1f')](_0x113cde);if(!_0x58ce75||!_0x58ce75[a2_0x3b79('0x28')]){if(environment_1[a2_0x3b79('0x1b')]){output['note']({'title':a2_0x3b79('0x13')+_0x113cde+'.'});}this[a2_0x3b79('0x4')]['statuses'][_0x113cde]='cache-miss';return![];}try{yield this['fileStorage'][a2_0x3b79('0x1d')](_0x113cde,_0x58ce75['get'],_0x393015);this[a2_0x3b79('0x4')][a2_0x3b79('0x2c')][_0x113cde]=a2_0x3b79('0x34');return!![];}catch(_0x5a8166){const _0x2fef8f=(_0x505728=_0x5a8166[a2_0x3b79('0x26')])!==null&&_0x505728!==void 0x0?_0x505728:_0x5a8166;if(_0x2fef8f[a2_0x3b79('0x2e')]&&_0x2fef8f['response'][a2_0x3b79('0x12')]===0x194){if(environment_1[a2_0x3b79('0x1b')]){output[a2_0x3b79('0x2d')]({'title':a2_0x3b79('0x13')+_0x113cde+a2_0x3b79('0x33')});}}else{this['messages'][a2_0x3b79('0x11')]=this[a2_0x3b79('0x10')][a2_0x3b79('0x5')](_0x2fef8f,a2_0x3b79('0x18'));}this[a2_0x3b79('0x4')]['statuses'][_0x113cde]=a2_0x3b79('0x1e');return![];}});}[a2_0x3b79('0x1c')](_0x27ca24,_0x1bb1ff){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x3b79('0x10')]['cacheError'])return![];const _0x5c03c0=Promise[a2_0x3b79('0xc')]()[a2_0x3b79('0x19')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x776db4;const _0x4d854b=yield this[a2_0x3b79('0x1f')](_0x27ca24);if(!_0x4d854b)return![];if(!_0x4d854b[a2_0x3b79('0xf')]){if(environment_1[a2_0x3b79('0x1b')]){output[a2_0x3b79('0x2d')]({'title':a2_0x3b79('0xb')+_0x27ca24+'.','bodyLines':[a2_0x3b79('0x32'),a2_0x3b79('0x20')]});}return!![];}if(!this['storeInCurrentProcess']){this[a2_0x3b79('0x15')][a2_0x3b79('0xd')]({'hash':_0x27ca24,'url':_0x4d854b[a2_0x3b79('0xf')]});return!![];}try{yield this['fileStorage'][a2_0x3b79('0x1c')](_0x27ca24,_0x4d854b[a2_0x3b79('0xf')],_0x1bb1ff);return!![];}catch(_0x583e65){const _0x5dca24=(_0x776db4=_0x583e65[a2_0x3b79('0x26')])!==null&&_0x776db4!==void 0x0?_0x776db4:_0x583e65;this[a2_0x3b79('0x10')]['cacheError']=this[a2_0x3b79('0x10')][a2_0x3b79('0x5')](_0x5dca24,a2_0x3b79('0x18'));return![];}}));this['storeRequests']['push'](_0x5c03c0);return _0x5c03c0;});}['hashUrls'](_0x141b06){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x141b06 in this[a2_0x3b79('0x4')][a2_0x3b79('0x23')]){return(yield this[a2_0x3b79('0x4')][a2_0x3b79('0x23')][_0x141b06])[_0x141b06];}else{const _0x51cb18=this[a2_0x3b79('0x4')][a2_0x3b79('0x16')][a2_0x3b79('0x2')](_0x810de6=>!this[a2_0x3b79('0x4')][a2_0x3b79('0x23')][_0x810de6['hash']])[a2_0x3b79('0x35')](_0x21955a=>_0x21955a['hash']);if(_0x51cb18[a2_0x3b79('0xe')](_0x141b06)===-0x1){_0x51cb18[a2_0x3b79('0xd')](_0x141b06);}const _0x29434c=this[a2_0x3b79('0x30')][a2_0x3b79('0x1')](this[a2_0x3b79('0x8')],_0x51cb18);_0x51cb18[a2_0x3b79('0x14')](_0x5956f6=>{this['runContext'][a2_0x3b79('0x23')][_0x5956f6]=_0x29434c;});return(yield _0x29434c)[_0x141b06];}});}[a2_0x3b79('0x2b')](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3235e9=yield Promise[a2_0x3b79('0x25')](this[a2_0x3b79('0x1a')])['then'](_0x2bf7bd=>_0x2bf7bd[a2_0x3b79('0x24')]((_0x40ed5c,_0x574df1)=>_0x40ed5c&&_0x574df1,!![]));if(!_0x3235e9){throw new Error(a2_0x3b79('0x27'));}});}}exports[a2_0x3b79('0x29')]=CloudRemoteCache;