const a5_0x5f4e=['agentName','note','../../../utilities/axios','axiosMultipleTries','branch','RUNNER_FAILURE_PERF_ENTRY','error:\x20','../../../utilities/nx-imports','next','apply','ciExecutionId:\x20','DistributedAgentApi','ciExecutionEnv','/nx-cloud/executions/tasks','mapRespToPerfEntry','throw','Completing\x20with\x20an\x20error','VERBOSE_LOGGING','axiosException','../../../utilities/environment','recordMetric','data','__awaiter','done','/nx-cloud/executions/complete-run-group','apiAxiosInstance','defineProperty','post','completeRunGroup','../../../utilities/metric-logger','error','ciExecutionId','runGroup:\x20','__esModule','response','ciExecutionEnv:\x20','then','createMetricRecorder','value','runGroup','tasks'];(function(_0x31fb3d,_0x5f4e1a){const _0xaf0b4d=function(_0xa5f49a){while(--_0xa5f49a){_0x31fb3d['push'](_0x31fb3d['shift']());}};_0xaf0b4d(++_0x5f4e1a);}(a5_0x5f4e,0x136));const a5_0xaf0b=function(_0x31fb3d,_0x5f4e1a){_0x31fb3d=_0x31fb3d-0x0;let _0xaf0b4d=a5_0x5f4e[_0x31fb3d];return _0xaf0b4d;};'use strict';var __awaiter=this&&this[a5_0xaf0b('0x28')]||function(_0x20b389,_0x437697,_0x3459aa,_0x5174b6){function _0x54e7d5(_0x14cdcb){return _0x14cdcb instanceof _0x3459aa?_0x14cdcb:new _0x3459aa(function(_0xa79bdb){_0xa79bdb(_0x14cdcb);});}return new(_0x3459aa||(_0x3459aa=Promise))(function(_0xa53c43,_0x2b9635){function _0x1b2e86(_0x517a9c){try{_0x189ca0(_0x5174b6[a5_0xaf0b('0x1a')](_0x517a9c));}catch(_0x3a41f8){_0x2b9635(_0x3a41f8);}}function _0x52d1b9(_0xfe9e2a){try{_0x189ca0(_0x5174b6[a5_0xaf0b('0x21')](_0xfe9e2a));}catch(_0x401f90){_0x2b9635(_0x401f90);}}function _0x189ca0(_0xcdfab1){_0xcdfab1[a5_0xaf0b('0x0')]?_0xa53c43(_0xcdfab1[a5_0xaf0b('0xf')]):_0x54e7d5(_0xcdfab1['value'])[a5_0xaf0b('0xd')](_0x1b2e86,_0x52d1b9);}_0x189ca0((_0x5174b6=_0x5174b6[a5_0xaf0b('0x1b')](_0x20b389,_0x437697||[]))['next']());});};Object[a5_0xaf0b('0x3')](exports,a5_0xaf0b('0xa'),{'value':!![]});exports[a5_0xaf0b('0x1d')]=void 0x0;const axios_1=require(a5_0xaf0b('0x14'));const environment_1=require(a5_0xaf0b('0x25'));const metric_logger_1=require(a5_0xaf0b('0x6'));const {output}=require(a5_0xaf0b('0x19'));class DistributedAgentApi{constructor(_0x52b682,_0x221725,_0x1b6d4e,_0x441bd9,_0x37c266,_0x38d2b3){this['branch']=_0x221725;this['runGroup']=_0x1b6d4e;this[a5_0xaf0b('0x8')]=_0x441bd9;this[a5_0xaf0b('0x1e')]=_0x37c266;this[a5_0xaf0b('0x12')]=_0x38d2b3;this['apiAxiosInstance']=(0x0,axios_1['createApiAxiosInstance'])(_0x52b682);}[a5_0xaf0b('0x11')](_0x175a61,_0x850851,_0x2471a6,_0x3f17b2){var _0x2c29c6;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x11f978=(0x0,metric_logger_1[a5_0xaf0b('0xe')])('dtePollTasks');try{const _0x41d572=yield(0x0,axios_1[a5_0xaf0b('0x15')])(()=>this['apiAxiosInstance'][a5_0xaf0b('0x4')](a5_0xaf0b('0x1f'),{'runGroup':this[a5_0xaf0b('0x10')],'ciExecutionId':this[a5_0xaf0b('0x8')],'ciExecutionEnv':this[a5_0xaf0b('0x1e')],'agentName':this[a5_0xaf0b('0x12')],'executionId':_0x175a61,'statusCode':_0x850851,'completedTasks':_0x2471a6,'targets':_0x3f17b2}));_0x11f978[a5_0xaf0b('0x26')]((0x0,metric_logger_1[a5_0xaf0b('0x20')])(_0x41d572));return _0x41d572[a5_0xaf0b('0x27')];}catch(_0x32ea9b){_0x11f978[a5_0xaf0b('0x26')](((_0x2c29c6=_0x32ea9b===null||_0x32ea9b===void 0x0?void 0x0:_0x32ea9b[a5_0xaf0b('0x24')])===null||_0x2c29c6===void 0x0?void 0x0:_0x2c29c6[a5_0xaf0b('0xb')])?(0x0,metric_logger_1[a5_0xaf0b('0x20')])(_0x32ea9b[a5_0xaf0b('0x24')][a5_0xaf0b('0xb')]):metric_logger_1[a5_0xaf0b('0x17')]);throw _0x32ea9b;}});}['completeRunGroupWithError'](_0x475724){var _0x16b0d4;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a5_0xaf0b('0x23')]){output[a5_0xaf0b('0x13')]({'title':a5_0xaf0b('0x22'),'bodyLines':[a5_0xaf0b('0x1c')+this[a5_0xaf0b('0x8')],a5_0xaf0b('0xc')+this[a5_0xaf0b('0x1e')],a5_0xaf0b('0x9')+this[a5_0xaf0b('0x10')],a5_0xaf0b('0x18')+_0x475724]});}const _0x106517=(0x0,metric_logger_1[a5_0xaf0b('0xe')])(a5_0xaf0b('0x5'));try{const _0x3bc69e=yield(0x0,axios_1[a5_0xaf0b('0x15')])(()=>this[a5_0xaf0b('0x2')]['post'](a5_0xaf0b('0x1'),{'branch':this[a5_0xaf0b('0x16')],'runGroup':this[a5_0xaf0b('0x10')],'ciExecutionId':this['ciExecutionId'],'ciExecutionEnv':this[a5_0xaf0b('0x1e')],'agentName':this['agentName'],'criticalErrorMessage':_0x475724}));if(environment_1[a5_0xaf0b('0x23')]){output[a5_0xaf0b('0x13')]({'title':'Completed\x20run\x20group\x20with\x20an\x20error'});}_0x106517[a5_0xaf0b('0x26')]((0x0,metric_logger_1[a5_0xaf0b('0x20')])(_0x3bc69e));}catch(_0x5f1981){_0x106517[a5_0xaf0b('0x26')](((_0x16b0d4=_0x5f1981===null||_0x5f1981===void 0x0?void 0x0:_0x5f1981[a5_0xaf0b('0x24')])===null||_0x16b0d4===void 0x0?void 0x0:_0x16b0d4[a5_0xaf0b('0xb')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x5f1981[a5_0xaf0b('0x24')][a5_0xaf0b('0xb')]):metric_logger_1[a5_0xaf0b('0x17')]);console[a5_0xaf0b('0x7')](_0x5f1981);}});}}exports[a5_0xaf0b('0x1d')]=DistributedAgentApi;