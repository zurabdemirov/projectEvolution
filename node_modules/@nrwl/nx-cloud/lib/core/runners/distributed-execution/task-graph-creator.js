const a15_0x10ac=['indexOf','defineProperty','roots','keys','tasks','dependencies','../../../utilities/nx-imports','self','push','findTask','add','addTaskDependencies','target','addDependencies','map','projects','targetDependencies','createTaskGraphCompat','filter','createTaskGraph','projectGraph','addTaskToGraph','defaultTargetDependencies','length','project','TaskGraphCreator','strictlyOrderedTargets'];(function(_0x2eb1c4,_0x10ac3e){const _0x130ee6=function(_0x13f17e){while(--_0x13f17e){_0x2eb1c4['push'](_0x2eb1c4['shift']());}};_0x130ee6(++_0x10ac3e);}(a15_0x10ac,0x128));const a15_0x130e=function(_0x2eb1c4,_0x10ac3e){_0x2eb1c4=_0x2eb1c4-0x0;let _0x130ee6=a15_0x10ac[_0x2eb1c4];return _0x130ee6;};'use strict';Object[a15_0x130e('0x2')](exports,'__esModule',{'value':!![]});exports['TaskGraphCreator']=exports[a15_0x130e('0x12')]=void 0x0;const stripJsonComments=require('strip-json-comments');const fs_1=require('fs');const {getDependencyConfigs,workspaceRoot}=require(a15_0x130e('0x7'));function createTaskGraphCompat(_0x4d1135,_0x1b7249,_0x1020e4){const _0x4b15a1=JSON['parse'](stripJsonComments((0x0,fs_1['readFileSync'])(workspaceRoot+'/nx.json')['toString']()));return new TaskGraphCreator(_0x1b7249,getDefaultDependencyConfigs(_0x4b15a1,_0x4d1135))['createTaskGraph'](_0x1020e4);}exports[a15_0x130e('0x12')]=createTaskGraphCompat;function getDefaultDependencyConfigs(_0x2a03b2,_0x7c7186){var _0x586dc0,_0x416736;const _0x2a9d8c=(_0x586dc0=_0x2a03b2[a15_0x130e('0x11')])!==null&&_0x586dc0!==void 0x0?_0x586dc0:{};const _0x4330a6=_0x7c7186?(_0x416736=_0x7c7186[a15_0x130e('0x0')])!==null&&_0x416736!==void 0x0?_0x416736:['build']:[];for(const _0x2dbb18 of _0x4330a6){_0x2a9d8c[_0x2dbb18]=_0x2a9d8c[_0x2dbb18]||[];_0x2a9d8c[_0x2dbb18]['push']({'target':_0x2dbb18,'projects':'dependencies'});}return _0x2a9d8c;}class TaskGraphCreator{constructor(_0x422cd3,_0x2715d4){this['projectGraph']=_0x422cd3;this[a15_0x130e('0x17')]=_0x2715d4;}[a15_0x130e('0x14')](_0xf44e6c){const _0x253e1c={'roots':[],'tasks':{},'dependencies':{}};for(const _0x355b16 of _0xf44e6c){this[a15_0x130e('0x16')](_0x355b16,_0x253e1c);const _0x2b1e23=getDependencyConfigs(_0x355b16[a15_0x130e('0xd')],this[a15_0x130e('0x17')],this[a15_0x130e('0x15')]);if(!_0x2b1e23){continue;}this[a15_0x130e('0xc')](_0x355b16,_0x2b1e23,_0xf44e6c,_0x253e1c);}_0x253e1c[a15_0x130e('0x3')]=Object[a15_0x130e('0x4')](_0x253e1c['dependencies'])[a15_0x130e('0x13')](_0x5e608d=>_0x253e1c[a15_0x130e('0x6')][_0x5e608d][a15_0x130e('0x18')]===0x0);return _0x253e1c;}[a15_0x130e('0xc')](_0x2328b8,_0x4828b8,_0x1c7792,_0x107fce){for(const _0x326bac of _0x4828b8){if(_0x326bac[a15_0x130e('0x10')]===a15_0x130e('0x8')){for(const _0xe40a5f of _0x1c7792){if(_0xe40a5f[a15_0x130e('0xd')][a15_0x130e('0x19')]===_0x2328b8['target'][a15_0x130e('0x19')]&&_0xe40a5f[a15_0x130e('0xd')][a15_0x130e('0xd')]===_0x326bac[a15_0x130e('0xd')]){_0x107fce[a15_0x130e('0x6')][_0x2328b8['id']][a15_0x130e('0x9')](_0xe40a5f['id']);}}}else if(_0x326bac[a15_0x130e('0x10')]===a15_0x130e('0x6')){const _0x364ac8=new Set();this[a15_0x130e('0xe')](_0x2328b8[a15_0x130e('0xd')][a15_0x130e('0x19')],_0x326bac[a15_0x130e('0xd')],_0x1c7792,_0x107fce,_0x2328b8['id'],_0x364ac8);}}}[a15_0x130e('0xe')](_0x5bdf64,_0x452d22,_0x47466a,_0x2bb924,_0x3585d2,_0x447deb){_0x447deb[a15_0x130e('0xb')](_0x5bdf64);const _0x4987c4=this['projectGraph']['dependencies'][_0x5bdf64];if(_0x4987c4){const _0x3ab762=_0x4987c4[a15_0x130e('0xf')](_0x493939=>_0x493939[a15_0x130e('0xd')]);for(const _0x200709 of _0x3ab762){if(_0x447deb['has'](_0x200709)){continue;}const _0x1658e8=this[a15_0x130e('0xa')]({'project':_0x200709,'target':_0x452d22},_0x47466a);if(_0x1658e8){if(_0x2bb924[a15_0x130e('0x6')][_0x3585d2][a15_0x130e('0x1')](_0x1658e8['id'])===-0x1){_0x2bb924[a15_0x130e('0x6')][_0x3585d2][a15_0x130e('0x9')](_0x1658e8['id']);}}else{this[a15_0x130e('0xe')](_0x200709,_0x452d22,_0x47466a,_0x2bb924,_0x3585d2,_0x447deb);}}}}['findTask']({project,target},_0x480a00){return _0x480a00['find'](_0x20ec3e=>_0x20ec3e[a15_0x130e('0xd')][a15_0x130e('0x19')]===project&&_0x20ec3e[a15_0x130e('0xd')]['target']===target);}[a15_0x130e('0x16')](_0x1fe2a7,_0x34e0bc){_0x34e0bc[a15_0x130e('0x5')][_0x1fe2a7['id']]=_0x1fe2a7;_0x34e0bc['dependencies'][_0x1fe2a7['id']]=[];}}exports[a15_0x130e('0x1a')]=TaskGraphCreator;